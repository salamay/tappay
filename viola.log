2024-09-11T00:19:50.557+01:00  INFO 16426 --- [service] [http-nio-323-exec-10] c.t.s.w.F.controller.WaveController      : Webhook call
2024-09-11T00:19:50.567+01:00  INFO 16426 --- [service] [http-nio-323-exec-10] c.t.s.w.F.controller.WaveController      : Webhook received from FlutterWave: tappay
2024-09-11T00:19:50.621+01:00  INFO 16426 --- [service] [http-nio-323-exec-10] c.t.s.w.FlutterWave.service.RaveService  : Verifying transaction: id:6595852
2024-09-11T00:19:50.902+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : --> GET https://api.flutterwave.com/v3/transactions/6595852/verify
2024-09-11T00:19:50.903+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : Authorization: FLWSECK_TEST-875126bc78dbb35e90f53437169376da-X
2024-09-11T00:19:50.904+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : Content-Type: application/json
2024-09-11T00:19:50.904+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : --> END GET
2024-09-11T00:19:50.943+01:00  INFO 16426 --- [service] [http-nio-323-exec-10] c.t.s.w.F.controller.WaveController      : Saving transaction: Rave-Pages251221277777
2024-09-11T00:19:51.090+01:00  INFO 16426 --- [service] [reactor-tcp-nio-4] c.t.s.w.F.controller.WaveController      : Transaction saved: Rave-Pages251221277777
2024-09-11T00:19:59.966+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : <-- 200 https://api.flutterwave.com/v3/transactions/6595852/verify (9061ms)
2024-09-11T00:19:59.967+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : date: Tue, 10 Sep 2024 23:20:00 GMT
2024-09-11T00:19:59.968+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : content-type: application/json; charset=utf-8
2024-09-11T00:19:59.969+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : content-length: 1141
2024-09-11T00:19:59.969+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : server: nginx/1.26.0
2024-09-11T00:19:59.969+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : access-control-allow-origin: *
2024-09-11T00:19:59.969+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : access-control-allow-headers: Origin, X-Requested-With, Content-Type, Accept, Authorization, v3-xapp-id, flw-auth-token, mra-auth-token, alt_mode_auth, mid, altmodeauth, cc-admin-token, x-flw-lang
2024-09-11T00:19:59.969+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : access-control-allow-methods: PUT, POST, GET, DELETE, OPTIONS
2024-09-11T00:19:59.969+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : etag: W/"475-iHHU9damKfKzn1PwdsKT5Q"
2024-09-11T00:19:59.970+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : strict-transport-security: max-age=31536000; includeSubDomains; preload; always;
2024-09-11T00:19:59.971+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : 
2024-09-11T00:19:59.971+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : {"status":"success","message":"Transaction fetched successfully","data":{"id":6595852,"tx_ref":"Rave-Pages251221277777","flw_ref":"FLW-MOCK-7b6d90f5a6f5e25579c7927f3a3fc67b","device_fingerprint":"a48d1c4c38d78cf260abf4bfedb3fc19","amount":500,"currency":"NGN","charged_amount":500,"app_fee":7,"merchant_fee":0,"processor_response":"Approved. Successful","auth_model":"PIN","ip":"52.209.154.143","narration":"CARD Transaction ","status":"successful","payment_type":"card","created_at":"2024-09-07T19:28:00.000Z","account_id":734680,"card":{"first_6digits":"506146","last_4digits":"4667","issuer":" DEBIT","country":"NIGERIA NG","type":"MAESTRO","token":"flw-t1nf-fb38cf52e25abbee2b6db22486106892-m03k","expiry":"10/29"},"meta":{"__CheckoutInitAddress":"https://sandbox.flutterwave.com/pay/pxmc2ionu50c?_gl=1*frd6fi*_gcl_au*MTQyOTk3NTgzMC4xNzI1NzM3MjEy*_ga*MTQxNjcwMzM2Ni4xNzI1NzE5NTg2*_ga_KQ9NSEMFCF*MTcyNTczNzE4Ni4xLjEuMTcyNTczNzI0MS41LjAuMA..","subaccount_split":"{}"},"amount_settled":493,"customer":{"id":2489392,"name":"Ayotunde oluwole","phone_number":"N/A","email":"ayotundesalam16@gmail.com","created_at":"2024-09-07T19:28:00.000Z"}}}
2024-09-11T00:19:59.972+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] okhttp3.OkHttpClient                     : <-- END HTTP (1141-byte body)
2024-09-11T00:19:59.981+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] c.t.s.w.FlutterWave.service.RaveService  : 
2024-09-11T00:19:59.981+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] c.t.s.w.FlutterWave.service.RaveService  : 200
2024-09-11T00:19:59.982+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] c.t.s.w.FlutterWave.service.RaveService  : Transaction verified: id:6595852
2024-09-11T00:20:00.070+01:00  INFO 16426 --- [service] [OkHttp https://api.flutterwave.com/...] c.t.s.w.F.controller.WaveController      : Saving transaction log: Rave-Pages251221277777
2024-09-11T00:20:00.076+01:00  INFO 16426 --- [service] [reactor-tcp-nio-5] c.t.s.w.F.controller.WaveController      : Balance updated: Rave-Pages251221277777
2024-09-11T00:20:00.124+01:00  INFO 16426 --- [service] [reactor-tcp-nio-5] c.t.s.w.Balance.context.BalanceContext   : SINK(NOTIFICATION): Sending 737680020 event
2024-09-11T00:21:08.060+01:00  INFO 16426 --- [service] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T00:21:12.182+01:00  INFO 17158 --- [service] [main] com.tappay.service.ServiceApplication    : Starting ServiceApplication using Java 17.0.9 with PID 17158 (/Users/mac/Documents/tappay/target/classes started by mac in /Users/mac/Documents/tappay)
2024-09-11T00:21:12.184+01:00  INFO 17158 --- [service] [main] com.tappay.service.ServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2024-09-11T00:21:12.803+01:00  INFO 17158 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T00:21:12.804+01:00  INFO 17158 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-11T00:21:12.971+01:00  INFO 17158 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 158 ms. Found 4 JPA repository interfaces.
2024-09-11T00:21:12.972+01:00  INFO 17158 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T00:21:12.973+01:00  INFO 17158 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2024-09-11T00:21:12.982+01:00  INFO 17158 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 3 R2DBC repository interfaces.
2024-09-11T00:21:13.761+01:00  INFO 17158 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 323 (http)
2024-09-11T00:21:13.773+01:00  INFO 17158 --- [service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-09-11T00:21:13.773+01:00  INFO 17158 --- [service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.28]
2024-09-11T00:21:13.836+01:00  INFO 17158 --- [service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-09-11T00:21:13.836+01:00  INFO 17158 --- [service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1591 ms
2024-09-11T00:21:14.005+01:00  INFO 17158 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up Local container entity manager
2024-09-11T00:21:14.008+01:00  INFO 17158 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T00:21:14.065+01:00  INFO 17158 --- [service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-11T00:21:14.128+01:00  INFO 17158 --- [service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.10.Final
2024-09-11T00:21:14.170+01:00  INFO 17158 --- [service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-09-11T00:21:14.458+01:00  INFO 17158 --- [service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-11T00:21:14.774+01:00  WARN 17158 --- [service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-11T00:21:15.544+01:00  INFO 17158 --- [service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-11T00:21:15.608+01:00  INFO 17158 --- [service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T00:21:15.841+01:00  INFO 17158 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : JSqlParser is in classpath; If applicable, JSqlParser will be used
2024-09-11T00:21:15.841+01:00  INFO 17158 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-09-11T00:21:16.657+01:00  INFO 17158 --- [service] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@693c7741, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d3b4646, org.springframework.security.web.context.SecurityContextHolderFilter@5a740449, org.springframework.security.web.header.HeaderWriterFilter@31773d5b, org.springframework.security.web.authentication.logout.LogoutFilter@54151d07, com.tappay.service.security.MySecurityFilter.RequestThrottleFilter@1d98daa0, com.tappay.service.security.MySecurityFilter.TokenFilter@4ef0bc5b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33ac7934, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20711b02, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@175c4ae5, org.springframework.security.web.session.SessionManagementFilter@6527aa0, org.springframework.security.web.access.ExceptionTranslationFilter@1b5e6983, org.springframework.security.web.access.intercept.AuthorizationFilter@4a2bc71f]
2024-09-11T00:21:16.657+01:00  INFO 17158 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T00:21:16.973+01:00  INFO 17158 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 323 (http) with context path ''
2024-09-11T00:21:16.984+01:00  INFO 17158 --- [service] [main] com.tappay.service.ServiceApplication    : Started ServiceApplication in 5.301 seconds (process running for 5.827)
2024-09-11T00:32:50.898+01:00  INFO 17158 --- [service] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T00:33:00.936+01:00  INFO 17317 --- [service] [main] com.tappay.service.ServiceApplication    : Starting ServiceApplication using Java 17.0.9 with PID 17317 (/Users/mac/Documents/tappay/target/classes started by mac in /Users/mac/Documents/tappay)
2024-09-11T00:33:00.939+01:00  INFO 17317 --- [service] [main] com.tappay.service.ServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2024-09-11T00:33:01.524+01:00  INFO 17317 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T00:33:01.525+01:00  INFO 17317 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-11T00:33:01.707+01:00  INFO 17317 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 173 ms. Found 4 JPA repository interfaces.
2024-09-11T00:33:01.709+01:00  INFO 17317 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T00:33:01.709+01:00  INFO 17317 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2024-09-11T00:33:01.719+01:00  INFO 17317 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 3 R2DBC repository interfaces.
2024-09-11T00:33:02.595+01:00  INFO 17317 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 323 (http)
2024-09-11T00:33:02.608+01:00  INFO 17317 --- [service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-09-11T00:33:02.609+01:00  INFO 17317 --- [service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.28]
2024-09-11T00:33:02.673+01:00  INFO 17317 --- [service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-09-11T00:33:02.673+01:00  INFO 17317 --- [service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1674 ms
2024-09-11T00:33:02.850+01:00  INFO 17317 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up Local container entity manager
2024-09-11T00:33:02.853+01:00  INFO 17317 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T00:33:02.905+01:00  INFO 17317 --- [service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-11T00:33:02.965+01:00  INFO 17317 --- [service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.10.Final
2024-09-11T00:33:03.007+01:00  INFO 17317 --- [service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-09-11T00:33:03.353+01:00  INFO 17317 --- [service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-11T00:33:03.681+01:00  WARN 17317 --- [service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-11T00:33:04.542+01:00  INFO 17317 --- [service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-11T00:33:04.603+01:00  INFO 17317 --- [service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T00:33:04.815+01:00  INFO 17317 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : JSqlParser is in classpath; If applicable, JSqlParser will be used
2024-09-11T00:33:04.815+01:00  INFO 17317 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-09-11T00:33:05.517+01:00  INFO 17317 --- [service] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@17a756db, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2d10160a, org.springframework.security.web.context.SecurityContextHolderFilter@125ace20, org.springframework.security.web.header.HeaderWriterFilter@2d2710a8, org.springframework.security.web.authentication.logout.LogoutFilter@533165e7, com.tappay.service.security.MySecurityFilter.RequestThrottleFilter@49f3ff41, com.tappay.service.security.MySecurityFilter.TokenFilter@1aba8978, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4c25687b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@33ac7934, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@157ff8f8, org.springframework.security.web.session.SessionManagementFilter@65d3a83, org.springframework.security.web.access.ExceptionTranslationFilter@623dc0b8, org.springframework.security.web.access.intercept.AuthorizationFilter@2e729fea]
2024-09-11T00:33:05.517+01:00  INFO 17317 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T00:33:05.764+01:00  INFO 17317 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 323 (http) with context path ''
2024-09-11T00:33:05.773+01:00  INFO 17317 --- [service] [main] com.tappay.service.ServiceApplication    : Started ServiceApplication in 5.378 seconds (process running for 5.859)
2024-09-11T00:35:52.183+01:00  INFO 17317 --- [service] [http-nio-323-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-11T00:35:52.184+01:00  INFO 17317 --- [service] [http-nio-323-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-09-11T00:35:52.185+01:00  INFO 17317 --- [service] [http-nio-323-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-09-11T00:35:52.780+01:00  INFO 17317 --- [service] [http-nio-323-exec-1] c.t.s.w.Transaction.service.TxService    : Sending cash from 784517052 to ayotundesalammain@gmail.com
2024-09-11T00:35:52.782+01:00 ERROR 17317 --- [service] [http-nio-323-exec-1] c.t.s.w.Transaction.service.TxService    : Error sending transaction: For input string: "ayotundesalammain@gmail.com"
2024-09-11T00:37:12.030+01:00  INFO 17317 --- [service] [http-nio-323-exec-5] c.t.s.w.Transaction.service.TxService    : Sending cash from 784517052 to 737680020
2024-09-11T00:37:12.030+01:00 ERROR 17317 --- [service] [http-nio-323-exec-5] c.t.s.w.Transaction.service.TxService    : Error sending transaction: For input string: "salam1999"
2024-09-11T00:52:21.718+01:00  INFO 17317 --- [service] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T00:52:25.247+01:00  INFO 17526 --- [service] [main] com.tappay.service.ServiceApplication    : Starting ServiceApplication using Java 17.0.9 with PID 17526 (/Users/mac/Documents/tappay/target/classes started by mac in /Users/mac/Documents/tappay)
2024-09-11T00:52:25.250+01:00  INFO 17526 --- [service] [main] com.tappay.service.ServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2024-09-11T00:52:25.830+01:00  INFO 17526 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T00:52:25.831+01:00  INFO 17526 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-11T00:52:26.000+01:00  INFO 17526 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 160 ms. Found 4 JPA repository interfaces.
2024-09-11T00:52:26.001+01:00  INFO 17526 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T00:52:26.001+01:00  INFO 17526 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2024-09-11T00:52:26.009+01:00  INFO 17526 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 3 R2DBC repository interfaces.
2024-09-11T00:52:26.785+01:00  INFO 17526 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 323 (http)
2024-09-11T00:52:26.797+01:00  INFO 17526 --- [service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-09-11T00:52:26.797+01:00  INFO 17526 --- [service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.28]
2024-09-11T00:52:26.862+01:00  INFO 17526 --- [service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-09-11T00:52:26.863+01:00  INFO 17526 --- [service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1552 ms
2024-09-11T00:52:27.031+01:00  INFO 17526 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up Local container entity manager
2024-09-11T00:52:27.034+01:00  INFO 17526 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T00:52:27.087+01:00  INFO 17526 --- [service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-11T00:52:27.150+01:00  INFO 17526 --- [service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.10.Final
2024-09-11T00:52:27.190+01:00  INFO 17526 --- [service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-09-11T00:52:27.497+01:00  INFO 17526 --- [service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-11T00:52:27.810+01:00  WARN 17526 --- [service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-11T00:52:28.570+01:00  INFO 17526 --- [service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-11T00:52:28.625+01:00  INFO 17526 --- [service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T00:52:28.837+01:00  INFO 17526 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : JSqlParser is in classpath; If applicable, JSqlParser will be used
2024-09-11T00:52:28.837+01:00  INFO 17526 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-09-11T00:52:29.495+01:00  INFO 17526 --- [service] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5f7dbdfa, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1ae8556c, org.springframework.security.web.context.SecurityContextHolderFilter@56589f00, org.springframework.security.web.header.HeaderWriterFilter@152bb4cc, org.springframework.security.web.authentication.logout.LogoutFilter@59b8a801, com.tappay.service.security.MySecurityFilter.RequestThrottleFilter@429aeac1, com.tappay.service.security.MySecurityFilter.TokenFilter@5de14222, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@738955e6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1018552d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@157e0f6b, org.springframework.security.web.session.SessionManagementFilter@394a7390, org.springframework.security.web.access.ExceptionTranslationFilter@4f66f2dd, org.springframework.security.web.access.intercept.AuthorizationFilter@324ee3ca]
2024-09-11T00:52:29.496+01:00  INFO 17526 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T00:52:29.713+01:00  INFO 17526 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 323 (http) with context path ''
2024-09-11T00:52:29.721+01:00  INFO 17526 --- [service] [main] com.tappay.service.ServiceApplication    : Started ServiceApplication in 4.953 seconds (process running for 5.458)
2024-09-11T00:52:44.694+01:00  INFO 17526 --- [service] [http-nio-323-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-11T00:52:44.694+01:00  INFO 17526 --- [service] [http-nio-323-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-09-11T00:52:44.695+01:00  INFO 17526 --- [service] [http-nio-323-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-09-11T00:52:45.174+01:00  INFO 17526 --- [service] [http-nio-323-exec-1] c.t.s.w.Transaction.service.TxService    : Sending cash from 784517052 to 737680020
2024-09-11T00:52:45.175+01:00  INFO 17526 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Checking if user is current user
2024-09-11T00:52:46.929+01:00  INFO 17526 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 737680020
2024-09-11T00:52:46.972+01:00  INFO 17526 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 784517052
2024-09-11T00:52:47.027+01:00  INFO 17526 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 737680020
2024-09-11T00:52:47.036+01:00  INFO 17526 --- [service] [reactor-tcp-nio-7] c.t.s.w.Transaction.service.TxService    : Sender transaction saved
2024-09-11T00:52:47.036+01:00  INFO 17526 --- [service] [reactor-tcp-nio-7] c.t.s.w.Transaction.context.TxContext    : SINK(NOTIFICATION): Sending 784517052 transaction event
2024-09-11T00:52:47.060+01:00  INFO 17526 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 784517052
2024-09-11T00:52:47.083+01:00  INFO 17526 --- [service] [reactor-tcp-nio-1] c.t.s.w.Transaction.service.TxService    : Receiver transaction saved
2024-09-11T00:52:47.084+01:00  INFO 17526 --- [service] [reactor-tcp-nio-1] c.t.s.w.Transaction.context.TxContext    : SINK(NOTIFICATION): Sending 737680020 transaction event
2024-09-11T00:52:47.089+01:00 ERROR 17526 --- [service] [reactor-tcp-nio-8] reactor.core.publisher.Operators         : Operator called default onErrorDropped

reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.NullPointerException: Cannot invoke "com.tappay.service.webservice.Balance.Model.UserBalance.getBalance()" because "senderBalance" is null
Caused by: java.lang.NullPointerException: Cannot invoke "com.tappay.service.webservice.Balance.Model.UserBalance.getBalance()" because "senderBalance" is null
	at com.tappay.service.webservice.Transaction.service.TxService.lambda$sendTransaction$1(TxService.java:66) ~[classes/:na]
	at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:289) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.deferredComplete(FluxUsingWhen.java:397) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$CommitInner.onComplete(FluxUsingWhen.java:532) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:46) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.onComplete(FluxUsingWhen.java:389) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:261) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoSingle$SingleSubscriber.onComplete(MonoSingle.java:164) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.deferredComplete(FluxUsingWhen.java:397) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$CommitInner.onComplete(FluxUsingWhen.java:532) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:210) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:210) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.pool.SimpleDequePool.maybeRecycleAndDrain(SimpleDequePool.java:540) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.pool.SimpleDequePool$QueuePoolRecyclerInner.onComplete(SimpleDequePool.java:781) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:46) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.pool.SimpleDequePool$QueuePoolRecyclerMono.subscribe(SimpleDequePool.java:893) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:241) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:204) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreElements$IgnoreElementsSubscriber.onComplete(MonoIgnoreElements.java:89) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:261) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126) ~[reactor-core-3.6.9.jar:3.6.9]
	at io.asyncer.r2dbc.mysql.internal.util.DiscardOnCancelSubscriber.onComplete(DiscardOnCancelSubscriber.java:84) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxHandle$HandleConditionalSubscriber.onNext(FluxHandle.java:359) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManyEmitterProcessor.drain(SinkManyEmitterProcessor.java:476) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManyEmitterProcessor.tryEmitNext(SinkManyEmitterProcessor.java:273) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.6.9.jar:3.6.9]
	at io.asyncer.r2dbc.mysql.client.ReactorNettyClient$ResponseSink.next(ReactorNettyClient.java:394) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at io.asyncer.r2dbc.mysql.client.ReactorNettyClient.lambda$new$0(ReactorNettyClient.java:119) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:185) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.netty.channel.FluxReceive.drainReceiver(FluxReceive.java:294) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.FluxReceive.onInboundNext(FluxReceive.java:403) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.ChannelOperations.onInboundNext(ChannelOperations.java:425) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:115) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1473) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1336) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1385) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2024-09-11T00:53:25.628+01:00  INFO 17526 --- [service] [http-nio-323-exec-3] c.t.s.w.Transaction.service.TxService    : Sending cash from 784517052 to 784517052
2024-09-11T00:53:25.629+01:00  INFO 17526 --- [service] [http-nio-323-exec-3] c.t.s.w.Profile.service.ProfileService   : Checking if user is current user
2024-09-11T00:53:25.629+01:00 ERROR 17526 --- [service] [http-nio-323-exec-3] c.t.s.w.Transaction.service.TxService    : Cannot send cash to self
2024-09-11T00:54:51.377+01:00  INFO 17526 --- [service] [http-nio-323-exec-6] c.t.s.w.Transaction.service.TxService    : Sending cash from 784517052 to 737680020
2024-09-11T00:54:51.377+01:00  INFO 17526 --- [service] [http-nio-323-exec-6] c.t.s.w.Profile.service.ProfileService   : Checking if user is current user
2024-09-11T00:54:51.382+01:00  INFO 17526 --- [service] [http-nio-323-exec-6] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 737680020
2024-09-11T00:54:51.405+01:00  INFO 17526 --- [service] [http-nio-323-exec-6] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 784517052
2024-09-11T00:54:51.423+01:00  INFO 17526 --- [service] [http-nio-323-exec-6] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 737680020
2024-09-11T00:54:51.428+01:00  INFO 17526 --- [service] [reactor-tcp-nio-3] c.t.s.w.Transaction.service.TxService    : Sender transaction saved
2024-09-11T00:54:51.428+01:00  INFO 17526 --- [service] [reactor-tcp-nio-3] c.t.s.w.Transaction.context.TxContext    : SINK(NOTIFICATION): Sending 784517052 transaction event
2024-09-11T00:54:51.441+01:00  INFO 17526 --- [service] [http-nio-323-exec-6] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 784517052
2024-09-11T00:54:51.461+01:00  INFO 17526 --- [service] [reactor-tcp-nio-3] c.t.s.w.Transaction.service.TxService    : Receiver transaction saved
2024-09-11T00:54:51.461+01:00  INFO 17526 --- [service] [reactor-tcp-nio-3] c.t.s.w.Transaction.context.TxContext    : SINK(NOTIFICATION): Sending 737680020 transaction event
2024-09-11T00:54:51.461+01:00 ERROR 17526 --- [service] [reactor-tcp-nio-8] reactor.core.publisher.Operators         : Operator called default onErrorDropped

reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.NullPointerException: Cannot invoke "com.tappay.service.webservice.Balance.Model.UserBalance.getBalance()" because "senderBalance" is null
Caused by: java.lang.NullPointerException: Cannot invoke "com.tappay.service.webservice.Balance.Model.UserBalance.getBalance()" because "senderBalance" is null
	at com.tappay.service.webservice.Transaction.service.TxService.lambda$sendTransaction$1(TxService.java:66) ~[classes/:na]
	at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:289) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.deferredComplete(FluxUsingWhen.java:397) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$CommitInner.onComplete(FluxUsingWhen.java:532) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:46) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.onComplete(FluxUsingWhen.java:389) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:261) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoSingle$SingleSubscriber.onComplete(MonoSingle.java:164) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.deferredComplete(FluxUsingWhen.java:397) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$CommitInner.onComplete(FluxUsingWhen.java:532) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:210) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:210) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.pool.SimpleDequePool.maybeRecycleAndDrain(SimpleDequePool.java:540) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.pool.SimpleDequePool$QueuePoolRecyclerInner.onComplete(SimpleDequePool.java:781) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:46) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.pool.SimpleDequePool$QueuePoolRecyclerMono.subscribe(SimpleDequePool.java:893) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:241) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:204) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreElements$IgnoreElementsSubscriber.onComplete(MonoIgnoreElements.java:89) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:261) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126) ~[reactor-core-3.6.9.jar:3.6.9]
	at io.asyncer.r2dbc.mysql.internal.util.DiscardOnCancelSubscriber.onComplete(DiscardOnCancelSubscriber.java:84) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxHandle$HandleConditionalSubscriber.onNext(FluxHandle.java:359) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManyEmitterProcessor.drain(SinkManyEmitterProcessor.java:476) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManyEmitterProcessor.tryEmitNext(SinkManyEmitterProcessor.java:273) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.6.9.jar:3.6.9]
	at io.asyncer.r2dbc.mysql.client.ReactorNettyClient$ResponseSink.next(ReactorNettyClient.java:394) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at io.asyncer.r2dbc.mysql.client.ReactorNettyClient.lambda$new$0(ReactorNettyClient.java:119) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:185) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.netty.channel.FluxReceive.drainReceiver(FluxReceive.java:294) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.FluxReceive.onInboundNext(FluxReceive.java:403) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.ChannelOperations.onInboundNext(ChannelOperations.java:425) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:115) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1473) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1336) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1385) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2024-09-11T00:55:19.137+01:00  INFO 17526 --- [service] [http-nio-323-exec-7] c.t.s.w.Transaction.service.TxService    : Sending cash from 784517052 to 737680020
2024-09-11T00:55:19.137+01:00  INFO 17526 --- [service] [http-nio-323-exec-7] c.t.s.w.Profile.service.ProfileService   : Checking if user is current user
2024-09-11T00:55:19.143+01:00 ERROR 17526 --- [service] [http-nio-323-exec-7] c.t.s.w.Transaction.service.TxService    : Insufficient balance
2024-09-11T00:55:26.550+01:00  INFO 17526 --- [service] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T00:55:29.714+01:00  INFO 17564 --- [service] [main] com.tappay.service.ServiceApplication    : Starting ServiceApplication using Java 17.0.9 with PID 17564 (/Users/mac/Documents/tappay/target/classes started by mac in /Users/mac/Documents/tappay)
2024-09-11T00:55:29.717+01:00  INFO 17564 --- [service] [main] com.tappay.service.ServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2024-09-11T00:55:30.297+01:00  INFO 17564 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T00:55:30.298+01:00  INFO 17564 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-11T00:55:30.466+01:00  INFO 17564 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 160 ms. Found 4 JPA repository interfaces.
2024-09-11T00:55:30.467+01:00  INFO 17564 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T00:55:30.468+01:00  INFO 17564 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2024-09-11T00:55:30.479+01:00  INFO 17564 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 3 R2DBC repository interfaces.
2024-09-11T00:55:31.300+01:00  INFO 17564 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 323 (http)
2024-09-11T00:55:31.363+01:00  INFO 17564 --- [service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-09-11T00:55:31.364+01:00  INFO 17564 --- [service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.28]
2024-09-11T00:55:31.456+01:00  INFO 17564 --- [service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-09-11T00:55:31.456+01:00  INFO 17564 --- [service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1678 ms
2024-09-11T00:55:31.646+01:00  INFO 17564 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up Local container entity manager
2024-09-11T00:55:31.649+01:00  INFO 17564 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T00:55:31.706+01:00  INFO 17564 --- [service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-11T00:55:31.772+01:00  INFO 17564 --- [service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.10.Final
2024-09-11T00:55:31.820+01:00  INFO 17564 --- [service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-09-11T00:55:32.138+01:00  INFO 17564 --- [service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-11T00:55:32.474+01:00  WARN 17564 --- [service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-11T00:55:33.273+01:00  INFO 17564 --- [service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-11T00:55:33.343+01:00  INFO 17564 --- [service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T00:55:33.558+01:00  INFO 17564 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : JSqlParser is in classpath; If applicable, JSqlParser will be used
2024-09-11T00:55:33.559+01:00  INFO 17564 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-09-11T00:55:34.343+01:00  INFO 17564 --- [service] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1c61f9bf, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@42365c82, org.springframework.security.web.context.SecurityContextHolderFilter@476a38d9, org.springframework.security.web.header.HeaderWriterFilter@125ace20, org.springframework.security.web.authentication.logout.LogoutFilter@693c7741, com.tappay.service.security.MySecurityFilter.RequestThrottleFilter@28e0e464, com.tappay.service.security.MySecurityFilter.TokenFilter@26b150cd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5120886f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@58a93f51, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@46c47690, org.springframework.security.web.session.SessionManagementFilter@3071d086, org.springframework.security.web.access.ExceptionTranslationFilter@7be9582e, org.springframework.security.web.access.intercept.AuthorizationFilter@74f54f8e]
2024-09-11T00:55:34.344+01:00  INFO 17564 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T00:55:34.628+01:00  INFO 17564 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 323 (http) with context path ''
2024-09-11T00:55:34.637+01:00  INFO 17564 --- [service] [main] com.tappay.service.ServiceApplication    : Started ServiceApplication in 5.449 seconds (process running for 5.936)
2024-09-11T00:56:36.207+01:00  INFO 17564 --- [service] [http-nio-323-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-11T00:56:36.207+01:00  INFO 17564 --- [service] [http-nio-323-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-09-11T00:56:36.209+01:00  INFO 17564 --- [service] [http-nio-323-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-09-11T00:56:36.724+01:00  INFO 17564 --- [service] [http-nio-323-exec-2] c.t.s.w.Transaction.service.TxService    : Sending cash from 784517052 to 737680020
2024-09-11T00:56:36.725+01:00  INFO 17564 --- [service] [http-nio-323-exec-2] c.t.s.w.Profile.service.ProfileService   : Checking if user is current user
2024-09-11T00:56:38.001+01:00  INFO 17564 --- [service] [http-nio-323-exec-2] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 737680020
2024-09-11T00:56:38.050+01:00  INFO 17564 --- [service] [http-nio-323-exec-2] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 784517052
2024-09-11T00:56:38.107+01:00  INFO 17564 --- [service] [http-nio-323-exec-2] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 737680020
2024-09-11T00:56:38.114+01:00  INFO 17564 --- [service] [reactor-tcp-nio-6] c.t.s.w.Transaction.service.TxService    : Sender transaction saved
2024-09-11T00:56:38.114+01:00  INFO 17564 --- [service] [reactor-tcp-nio-6] c.t.s.w.Transaction.context.TxContext    : SINK(NOTIFICATION): Sending 784517052 transaction event
2024-09-11T00:56:38.139+01:00  INFO 17564 --- [service] [http-nio-323-exec-2] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 784517052
2024-09-11T00:56:38.165+01:00  INFO 17564 --- [service] [reactor-tcp-nio-1] c.t.s.w.Transaction.service.TxService    : Receiver transaction saved
2024-09-11T00:56:38.165+01:00  INFO 17564 --- [service] [reactor-tcp-nio-1] c.t.s.w.Transaction.context.TxContext    : SINK(NOTIFICATION): Sending 737680020 transaction event
2024-09-11T00:56:38.170+01:00 ERROR 17564 --- [service] [reactor-tcp-nio-8] reactor.core.publisher.Operators         : Operator called default onErrorDropped

reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.NullPointerException: Cannot invoke "com.tappay.service.webservice.Balance.Model.UserBalance.getBalance()" because "senderBalance" is null
Caused by: java.lang.NullPointerException: Cannot invoke "com.tappay.service.webservice.Balance.Model.UserBalance.getBalance()" because "senderBalance" is null
	at com.tappay.service.webservice.Transaction.service.TxService.lambda$sendTransaction$1(TxService.java:66) ~[classes/:na]
	at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:289) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.deferredComplete(FluxUsingWhen.java:397) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$CommitInner.onComplete(FluxUsingWhen.java:532) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:46) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.onComplete(FluxUsingWhen.java:389) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:261) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoSingle$SingleSubscriber.onComplete(MonoSingle.java:164) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.deferredComplete(FluxUsingWhen.java:397) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$CommitInner.onComplete(FluxUsingWhen.java:532) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:210) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:210) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.pool.SimpleDequePool.maybeRecycleAndDrain(SimpleDequePool.java:540) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.pool.SimpleDequePool$QueuePoolRecyclerInner.onComplete(SimpleDequePool.java:781) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:46) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.pool.SimpleDequePool$QueuePoolRecyclerMono.subscribe(SimpleDequePool.java:893) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:241) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:204) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreElements$IgnoreElementsSubscriber.onComplete(MonoIgnoreElements.java:89) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:261) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126) ~[reactor-core-3.6.9.jar:3.6.9]
	at io.asyncer.r2dbc.mysql.internal.util.DiscardOnCancelSubscriber.onComplete(DiscardOnCancelSubscriber.java:84) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxHandle$HandleConditionalSubscriber.onNext(FluxHandle.java:359) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManyEmitterProcessor.drain(SinkManyEmitterProcessor.java:476) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManyEmitterProcessor.tryEmitNext(SinkManyEmitterProcessor.java:273) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.6.9.jar:3.6.9]
	at io.asyncer.r2dbc.mysql.client.ReactorNettyClient$ResponseSink.next(ReactorNettyClient.java:394) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at io.asyncer.r2dbc.mysql.client.ReactorNettyClient.lambda$new$0(ReactorNettyClient.java:119) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:185) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.netty.channel.FluxReceive.drainReceiver(FluxReceive.java:294) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.FluxReceive.onInboundNext(FluxReceive.java:403) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.ChannelOperations.onInboundNext(ChannelOperations.java:425) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:115) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1473) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1336) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1385) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2024-09-11T01:04:16.774+01:00  INFO 17564 --- [service] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T01:04:20.483+01:00  INFO 17666 --- [service] [main] com.tappay.service.ServiceApplication    : Starting ServiceApplication using Java 17.0.9 with PID 17666 (/Users/mac/Documents/tappay/target/classes started by mac in /Users/mac/Documents/tappay)
2024-09-11T01:04:20.486+01:00  INFO 17666 --- [service] [main] com.tappay.service.ServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2024-09-11T01:04:21.118+01:00  INFO 17666 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T01:04:21.119+01:00  INFO 17666 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-11T01:04:21.293+01:00  INFO 17666 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 165 ms. Found 4 JPA repository interfaces.
2024-09-11T01:04:21.294+01:00  INFO 17666 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T01:04:21.294+01:00  INFO 17666 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2024-09-11T01:04:21.303+01:00  INFO 17666 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 3 R2DBC repository interfaces.
2024-09-11T01:04:22.121+01:00  INFO 17666 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 323 (http)
2024-09-11T01:04:22.136+01:00  INFO 17666 --- [service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-09-11T01:04:22.136+01:00  INFO 17666 --- [service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.28]
2024-09-11T01:04:22.202+01:00  INFO 17666 --- [service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-09-11T01:04:22.203+01:00  INFO 17666 --- [service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1648 ms
2024-09-11T01:04:22.368+01:00  INFO 17666 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up Local container entity manager
2024-09-11T01:04:22.372+01:00  INFO 17666 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T01:04:22.431+01:00  INFO 17666 --- [service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-11T01:04:22.501+01:00  INFO 17666 --- [service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.10.Final
2024-09-11T01:04:22.538+01:00  INFO 17666 --- [service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-09-11T01:04:22.827+01:00  INFO 17666 --- [service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-11T01:04:23.165+01:00  WARN 17666 --- [service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-11T01:04:24.034+01:00  INFO 17666 --- [service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-11T01:04:24.101+01:00  INFO 17666 --- [service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T01:04:24.334+01:00  INFO 17666 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : JSqlParser is in classpath; If applicable, JSqlParser will be used
2024-09-11T01:04:24.334+01:00  INFO 17666 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-09-11T01:04:25.150+01:00  INFO 17666 --- [service] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@47184859, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@22781286, org.springframework.security.web.context.SecurityContextHolderFilter@690113f0, org.springframework.security.web.header.HeaderWriterFilter@5dc90de7, org.springframework.security.web.authentication.logout.LogoutFilter@499f9003, com.tappay.service.security.MySecurityFilter.RequestThrottleFilter@6b4fc2d1, com.tappay.service.security.MySecurityFilter.TokenFilter@721fc228, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f915016, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2e9bff08, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@11564455, org.springframework.security.web.session.SessionManagementFilter@738955e6, org.springframework.security.web.access.ExceptionTranslationFilter@47baf547, org.springframework.security.web.access.intercept.AuthorizationFilter@157e0f6b]
2024-09-11T01:04:25.151+01:00  INFO 17666 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T01:04:25.428+01:00  INFO 17666 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 323 (http) with context path ''
2024-09-11T01:04:25.438+01:00  INFO 17666 --- [service] [main] com.tappay.service.ServiceApplication    : Started ServiceApplication in 5.499 seconds (process running for 5.983)
2024-09-11T01:08:40.478+01:00  INFO 17666 --- [service] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T01:08:43.668+01:00  INFO 17714 --- [service] [main] com.tappay.service.ServiceApplication    : Starting ServiceApplication using Java 17.0.9 with PID 17714 (/Users/mac/Documents/tappay/target/classes started by mac in /Users/mac/Documents/tappay)
2024-09-11T01:08:43.670+01:00  INFO 17714 --- [service] [main] com.tappay.service.ServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2024-09-11T01:08:44.343+01:00  INFO 17714 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T01:08:44.343+01:00  INFO 17714 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-11T01:08:44.525+01:00  INFO 17714 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 173 ms. Found 4 JPA repository interfaces.
2024-09-11T01:08:44.527+01:00  INFO 17714 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T01:08:44.527+01:00  INFO 17714 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2024-09-11T01:08:44.538+01:00  INFO 17714 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 3 R2DBC repository interfaces.
2024-09-11T01:08:45.622+01:00  INFO 17714 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 323 (http)
2024-09-11T01:08:45.640+01:00  INFO 17714 --- [service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-09-11T01:08:45.641+01:00  INFO 17714 --- [service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.28]
2024-09-11T01:08:45.762+01:00  INFO 17714 --- [service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-09-11T01:08:45.763+01:00  INFO 17714 --- [service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2019 ms
2024-09-11T01:08:46.019+01:00  INFO 17714 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up Local container entity manager
2024-09-11T01:08:46.026+01:00  INFO 17714 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T01:08:46.098+01:00  INFO 17714 --- [service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-11T01:08:46.188+01:00  INFO 17714 --- [service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.10.Final
2024-09-11T01:08:46.270+01:00  INFO 17714 --- [service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-09-11T01:08:46.870+01:00  INFO 17714 --- [service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-11T01:08:47.540+01:00  WARN 17714 --- [service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-11T01:08:49.943+01:00  INFO 17714 --- [service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-11T01:08:50.367+01:00  INFO 17714 --- [service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T01:08:59.718+01:00  INFO 17714 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : JSqlParser is in classpath; If applicable, JSqlParser will be used
2024-09-11T01:08:59.719+01:00  INFO 17714 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-09-11T01:09:13.873+01:00  INFO 17729 --- [service] [main] com.tappay.service.ServiceApplication    : Starting ServiceApplication using Java 17.0.9 with PID 17729 (/Users/mac/Documents/tappay/target/classes started by mac in /Users/mac/Documents/tappay)
2024-09-11T01:09:13.882+01:00  INFO 17729 --- [service] [main] com.tappay.service.ServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2024-09-11T01:09:15.749+01:00  INFO 17729 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T01:09:15.750+01:00  INFO 17729 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-11T01:09:16.207+01:00  INFO 17729 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 425 ms. Found 4 JPA repository interfaces.
2024-09-11T01:09:16.212+01:00  INFO 17729 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T01:09:16.213+01:00  INFO 17729 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2024-09-11T01:09:16.246+01:00  INFO 17729 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 32 ms. Found 3 R2DBC repository interfaces.
2024-09-11T01:09:18.535+01:00  INFO 17729 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 323 (http)
2024-09-11T01:09:18.574+01:00  INFO 17729 --- [service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-09-11T01:09:18.576+01:00  INFO 17729 --- [service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.28]
2024-09-11T01:09:18.789+01:00  INFO 17729 --- [service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-09-11T01:09:18.790+01:00  INFO 17729 --- [service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4684 ms
2024-09-11T01:09:19.267+01:00  INFO 17729 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up Local container entity manager
2024-09-11T01:09:19.277+01:00  INFO 17729 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T01:09:19.433+01:00  INFO 17729 --- [service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-11T01:09:19.587+01:00  INFO 17729 --- [service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.10.Final
2024-09-11T01:09:19.676+01:00  INFO 17729 --- [service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-09-11T01:09:20.535+01:00  INFO 17729 --- [service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-11T01:09:21.523+01:00  WARN 17729 --- [service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-11T01:09:24.002+01:00  INFO 17729 --- [service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-11T01:09:24.262+01:00  INFO 17729 --- [service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T01:09:24.922+01:00  INFO 17729 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : JSqlParser is in classpath; If applicable, JSqlParser will be used
2024-09-11T01:09:24.924+01:00  INFO 17729 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-09-11T01:09:27.228+01:00  INFO 17729 --- [service] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5aa026e9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@499f9003, org.springframework.security.web.context.SecurityContextHolderFilter@4e6c703a, org.springframework.security.web.header.HeaderWriterFilter@5c21b22e, org.springframework.security.web.authentication.logout.LogoutFilter@21bf1b1f, com.tappay.service.security.MySecurityFilter.RequestThrottleFilter@fe09383, com.tappay.service.security.MySecurityFilter.TokenFilter@5fb0a09e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@282d1023, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@738955e6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@39bd07fe, org.springframework.security.web.session.SessionManagementFilter@476a38d9, org.springframework.security.web.access.ExceptionTranslationFilter@7dbc77ca, org.springframework.security.web.access.intercept.AuthorizationFilter@1c61f9bf]
2024-09-11T01:09:27.230+01:00  INFO 17729 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T01:09:28.181+01:00  INFO 17729 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 323 (http) with context path ''
2024-09-11T01:09:28.207+01:00  INFO 17729 --- [service] [main] com.tappay.service.ServiceApplication    : Started ServiceApplication in 16.057 seconds (process running for 17.533)
2024-09-11T01:09:37.955+01:00  INFO 17729 --- [service] [http-nio-323-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-11T01:09:37.956+01:00  INFO 17729 --- [service] [http-nio-323-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-09-11T01:09:37.959+01:00  INFO 17729 --- [service] [http-nio-323-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2024-09-11T01:09:39.166+01:00  INFO 17729 --- [service] [http-nio-323-exec-1] c.t.s.w.Transaction.service.TxService    : Sending cash from 784517052 to 737680020
2024-09-11T01:09:39.167+01:00  INFO 17729 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Checking if user is current user
2024-09-11T01:09:41.281+01:00 ERROR 17729 --- [service] [http-nio-323-exec-1] c.t.s.w.Transaction.service.TxService    : Insufficient balance
2024-09-11T01:10:04.766+01:00  INFO 17729 --- [service] [http-nio-323-exec-3] c.t.s.w.Transaction.service.TxService    : Sending cash from 784517052 to 737680020
2024-09-11T01:10:04.767+01:00  INFO 17729 --- [service] [http-nio-323-exec-3] c.t.s.w.Profile.service.ProfileService   : Checking if user is current user
2024-09-11T01:10:04.773+01:00  INFO 17729 --- [service] [http-nio-323-exec-3] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 737680020
2024-09-11T01:10:04.808+01:00  INFO 17729 --- [service] [http-nio-323-exec-3] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 784517052
2024-09-11T01:10:04.852+01:00  INFO 17729 --- [service] [http-nio-323-exec-3] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 737680020
2024-09-11T01:10:04.858+01:00  INFO 17729 --- [service] [reactor-tcp-nio-3] c.t.s.w.Transaction.service.TxService    : Sender transaction saved
2024-09-11T01:10:04.858+01:00  INFO 17729 --- [service] [reactor-tcp-nio-3] c.t.s.w.Transaction.context.TxContext    : SINK(NOTIFICATION): Sending 784517052 transaction event
2024-09-11T01:10:04.868+01:00  INFO 17729 --- [service] [http-nio-323-exec-3] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 784517052
2024-09-11T01:10:04.888+01:00  INFO 17729 --- [service] [reactor-tcp-nio-3] c.t.s.w.Transaction.service.TxService    : Receiver transaction saved
2024-09-11T01:10:04.889+01:00  INFO 17729 --- [service] [reactor-tcp-nio-3] c.t.s.w.Transaction.context.TxContext    : SINK(NOTIFICATION): Sending 737680020 transaction event
2024-09-11T01:10:04.895+01:00 ERROR 17729 --- [service] [reactor-tcp-nio-2] reactor.core.publisher.Operators         : Operator called default onErrorDropped

reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.IllegalStateException: block()/blockFirst()/blockLast() are blocking, which is not supported in thread reactor-tcp-nio-2
Caused by: java.lang.IllegalStateException: block()/blockFirst()/blockLast() are blocking, which is not supported in thread reactor-tcp-nio-2
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:87) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Mono.block(Mono.java:1779) ~[reactor-core-3.6.9.jar:3.6.9]
	at com.tappay.service.webservice.Transaction.service.TxService.lambda$sendTransaction$1(TxService.java:67) ~[classes/:na]
	at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onComplete(MonoPeekTerminal.java:289) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.deferredComplete(FluxUsingWhen.java:397) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$CommitInner.onComplete(FluxUsingWhen.java:532) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:46) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.onComplete(FluxUsingWhen.java:389) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:261) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoSingle$SingleSubscriber.onComplete(MonoSingle.java:164) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.deferredComplete(FluxUsingWhen.java:397) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxUsingWhen$CommitInner.onComplete(FluxUsingWhen.java:532) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2231) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:210) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:210) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.pool.SimpleDequePool.maybeRecycleAndDrain(SimpleDequePool.java:540) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.pool.SimpleDequePool$QueuePoolRecyclerInner.onComplete(SimpleDequePool.java:781) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:46) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.pool.SimpleDequePool$QueuePoolRecyclerMono.subscribe(SimpleDequePool.java:893) ~[reactor-pool-1.0.8.jar:1.0.8]
	at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:241) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:204) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoIgnoreElements$IgnoreElementsSubscriber.onComplete(MonoIgnoreElements.java:89) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:261) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126) ~[reactor-core-3.6.9.jar:3.6.9]
	at io.asyncer.r2dbc.mysql.internal.util.DiscardOnCancelSubscriber.onComplete(DiscardOnCancelSubscriber.java:84) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxHandle$HandleConditionalSubscriber.onNext(FluxHandle.java:359) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManyEmitterProcessor.drain(SinkManyEmitterProcessor.java:476) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManyEmitterProcessor.tryEmitNext(SinkManyEmitterProcessor.java:273) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.6.9.jar:3.6.9]
	at io.asyncer.r2dbc.mysql.client.ReactorNettyClient$ResponseSink.next(ReactorNettyClient.java:394) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at io.asyncer.r2dbc.mysql.client.ReactorNettyClient.lambda$new$0(ReactorNettyClient.java:119) ~[r2dbc-mysql-1.3.0.jar:1.3.0]
	at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:185) ~[reactor-core-3.6.9.jar:3.6.9]
	at reactor.netty.channel.FluxReceive.drainReceiver(FluxReceive.java:294) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.FluxReceive.onInboundNext(FluxReceive.java:403) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.ChannelOperations.onInboundNext(ChannelOperations.java:425) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:115) ~[reactor-netty-core-1.1.22.jar:1.1.22]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1473) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1336) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1385) ~[netty-handler-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.112.Final.jar:4.1.112.Final]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2024-09-11T01:11:22.765+01:00  INFO 17729 --- [service] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T01:11:41.635+01:00  INFO 17759 --- [service] [main] com.tappay.service.ServiceApplication    : Starting ServiceApplication using Java 17.0.9 with PID 17759 (/Users/mac/Documents/tappay/target/classes started by mac in /Users/mac/Documents/tappay)
2024-09-11T01:11:41.643+01:00  INFO 17759 --- [service] [main] com.tappay.service.ServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2024-09-11T01:11:43.951+01:00  INFO 17759 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T01:11:43.952+01:00  INFO 17759 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-11T01:11:44.432+01:00  INFO 17759 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 457 ms. Found 4 JPA repository interfaces.
2024-09-11T01:11:44.437+01:00  INFO 17759 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-09-11T01:11:44.438+01:00  INFO 17759 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data R2DBC repositories in DEFAULT mode.
2024-09-11T01:11:44.462+01:00  INFO 17759 --- [service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 23 ms. Found 3 R2DBC repository interfaces.
2024-09-11T01:11:46.649+01:00  INFO 17759 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 323 (http)
2024-09-11T01:11:46.674+01:00  INFO 17759 --- [service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-09-11T01:11:46.675+01:00  INFO 17759 --- [service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.28]
2024-09-11T01:11:46.822+01:00  INFO 17759 --- [service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-09-11T01:11:46.823+01:00  INFO 17759 --- [service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4928 ms
2024-09-11T01:11:47.248+01:00  INFO 17759 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up Local container entity manager
2024-09-11T01:11:47.256+01:00  INFO 17759 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T01:11:47.380+01:00  INFO 17759 --- [service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-11T01:11:47.505+01:00  INFO 17759 --- [service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.10.Final
2024-09-11T01:11:47.597+01:00  INFO 17759 --- [service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-09-11T01:11:48.218+01:00  INFO 17759 --- [service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-11T01:11:48.925+01:00  WARN 17759 --- [service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-11T01:11:50.523+01:00  INFO 17759 --- [service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-11T01:11:50.647+01:00  INFO 17759 --- [service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-11T01:11:50.999+01:00  INFO 17759 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : JSqlParser is in classpath; If applicable, JSqlParser will be used
2024-09-11T01:11:50.999+01:00  INFO 17759 --- [service] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2024-09-11T01:11:52.163+01:00  INFO 17759 --- [service] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@54151d07, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2e729fea, org.springframework.security.web.context.SecurityContextHolderFilter@64d0b8e3, org.springframework.security.web.header.HeaderWriterFilter@598f6c93, org.springframework.security.web.authentication.logout.LogoutFilter@70799ca7, com.tappay.service.security.MySecurityFilter.RequestThrottleFilter@5af64ce0, com.tappay.service.security.MySecurityFilter.TokenFilter@5ee76cf2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7be9582e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6153aca1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a345c6c, org.springframework.security.web.session.SessionManagementFilter@5ba7391b, org.springframework.security.web.access.ExceptionTranslationFilter@6afdb486, org.springframework.security.web.access.intercept.AuthorizationFilter@6cb2d5ea]
2024-09-11T01:11:52.164+01:00  INFO 17759 --- [service] [main] c.t.service.MyDataSource.MyDataSource    : Setting up data source
2024-09-11T01:11:52.627+01:00  INFO 17759 --- [service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 323 (http) with context path ''
2024-09-11T01:11:52.641+01:00  INFO 17759 --- [service] [main] com.tappay.service.ServiceApplication    : Started ServiceApplication in 24.103 seconds (process running for 25.955)
2024-09-11T01:14:30.724+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-11T01:14:30.725+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-09-11T01:14:30.727+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-09-11T01:14:31.235+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] c.t.s.w.Transaction.service.TxService    : Sending cash from 784517052 to 737680020
2024-09-11T01:14:31.236+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Checking if user is current user
2024-09-11T01:14:32.980+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 737680020
2024-09-11T01:14:33.036+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 784517052
2024-09-11T01:14:33.100+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 737680020
2024-09-11T01:14:33.118+01:00  INFO 17759 --- [service] [reactor-tcp-nio-6] c.t.s.w.Transaction.service.TxService    : Sender transaction saved
2024-09-11T01:14:33.119+01:00  INFO 17759 --- [service] [reactor-tcp-nio-6] c.t.s.w.Transaction.context.TxContext    : SINK(NOTIFICATION): Sending 784517052 transaction event
2024-09-11T01:14:33.126+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] c.t.s.w.Profile.service.ProfileService   : Getting profile for user: 784517052
2024-09-11T01:14:33.154+01:00  INFO 17759 --- [service] [reactor-tcp-nio-8] c.t.s.w.Transaction.service.TxService    : Receiver transaction saved
2024-09-11T01:14:33.155+01:00  INFO 17759 --- [service] [reactor-tcp-nio-8] c.t.s.w.Transaction.context.TxContext    : SINK(NOTIFICATION): Sending 737680020 transaction event
2024-09-11T01:14:33.158+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] c.t.s.w.Transaction.service.TxService    : Sender balance deducted: New balance 1000
2024-09-11T01:14:33.158+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] c.t.s.w.Balance.context.BalanceContext   : SINK(NOTIFICATION): Sending 784517052 event
2024-09-11T01:14:33.167+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] c.t.s.w.Transaction.service.TxService    : Receiver balance deducted: New balance 1000
2024-09-11T01:14:33.167+01:00  INFO 17759 --- [service] [http-nio-323-exec-1] c.t.s.w.Balance.context.BalanceContext   : SINK(NOTIFICATION): Sending 737680020 event
2024-09-11T01:15:12.901+01:00  INFO 17759 --- [service] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
